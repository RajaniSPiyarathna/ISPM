<?php
session_start();

// Check if the user is logged in
if (!isset($_SESSION['user_id'])) {
    header("Location: ../auth/login.php");
    exit;
}

// Optional: Check user role if needed
 if ($_SESSION['role'] !== 'employee') {
     header("Location: ../auth/login.php");    
	 exit;
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LECO Security Awareness</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        header {
            background-color: #007bff;
            color: #fff;
            height: 150px;
        }

        .fixed-size {
            width: 600px;
            height: 338px;
            margin: 0 auto;
        }

        .next-button {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">LECO Security</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.php">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.php">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="modules/auth/login.php">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-primary text-white text-center py-4">
        <div class="container">
            <h1 class="display-4">Welcome to LECO's Security Awareness Platform</h1>
            <p class="lead">Stay informed, stay secure. Train, learn, and test your cybersecurity knowledge.</p>
        </div>
    </header>

    <!-- Malware Quiz Section -->
    <section class="quiz-section py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Test Your Knowledge on Malware</h2>
            <form id="malwareQuizForm">
                <div class="row">
                    <div class="col-lg-12">
                        <ol>
                            <li>
                                <strong>What is malware?</strong><br>
                                <label>
                                    <input type="radio" name="m1" value="A"> A) Software designed to protect computers
                                </label><br>
                                <label>
                                    <input type="radio" name="m1" value="B"> B) Malicious software designed to harm or exploit systems
                                </label><br>
                                <label>
                                    <input type="radio" name="m1" value="C"> C) A type of computer hardware
                                </label><br>
                                <label>
                                    <input type="radio" name="m1" value="D"> D) A security update
                                </label><br><br>
                            </li>

                            <li>
                                <strong>Which of the following is a type of malware?</strong><br>
                                <label>
                                    <input type="radio" name="m2" value="A"> A) Firewall
                                </label><br>
                                <label>
                                    <input type="radio" name="m2" value="B"> B) Antivirus
                                </label><br>
                                <label>
                                    <input type="radio" name="m2" value="C"> C) Trojan Horse
                                </label><br>
                                <label>
                                    <input type="radio" name="m2" value="D"> D) Backup software
                                </label><br><br>
                            </li>

                            <li>
                                <strong>What is the primary goal of malware?</strong><br>
                                <label>
                                    <input type="radio" name="m3" value="A"> A) To improve system performance
                                </label><br>
                                <label>
                                    <input type="radio" name="m3" value="B"> B) To disrupt, damage, or gain unauthorized access to systems
                                </label><br>
                                <label>
                                    <input type="radio" name="m3" value="C"> C) To upgrade software
                                </label><br>
                                <label>
                                    <input type="radio" name="m3" value="D"> D) To clean up system files
                                </label><br><br>
                            </li>

                            <li>
                                <strong>What does ransomware do?</strong><br>
                                <label>
                                    <input type="radio" name="m4" value="A"> A) Increases computer speed
                                </label><br>
                                <label>
                                    <input type="radio" name="m4" value="B"> B) Encrypts files and demands payment for decryption
                                </label><br>
                                <label>
                                    <input type="radio" name="m4" value="C"> C) Blocks websites
                                </label><br>
                                <label>
                                    <input type="radio" name="m4" value="D"> D) Removes viruses
                                </label><br><br>
                            </li>

                            <li>
                                <strong>Which of the following is a common way malware is spread?</strong><br>
                                <label>
                                    <input type="radio" name="m5" value="A"> A) Official app stores
                                </label><br>
                                <label>
                                    <input type="radio" name="m5" value="B"> B) Opening suspicious email attachments or links
                                </label><br>
                                <label>
                                    <input type="radio" name="m5" value="C"> C) System updates
                                </label><br>
                                <label>
                                    <input type="radio" name="m5" value="D"> D) Safe websites
                                </label><br><br>
                            </li>
                        </ol>

                        <button type="button" class="btn btn-primary" onclick="checkMalwareAnswers()">Submit Answers</button>

                        <!-- Results Section -->
                        <div id="malwareResult" class="mt-4"></div>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Next button (Initially hidden) -->
    <div class="container text-center">
        <center>
            <button id="nextBtn" class="btn btn-success mt-4" style="display: none;" onclick="goToNextPage()">Next</button>
        </center>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <p>&copy; 2024 Phishing Awareness. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Script to check malware answers and display the result -->
    <script>
        function checkMalwareAnswers() {
            var score = 0;
            var totalQuestions = 5;

            // Correct answers
            var malwareAnswers = {
                m1: "B",
                m2: "C",
                m3: "B",
                m4: "B",
                m5: "B"
            };

            var malwareResultHtml = '';
            for (var question in malwareAnswers) {
                var selectedAnswer = document.querySelector(`input[name="${question}"]:checked`);
                if (selectedAnswer) {
                    if (selectedAnswer.value === malwareAnswers[question]) {
                        score++;
                        malwareResultHtml += `<strong>${question}: Correct!</strong><br>`;
                    } else {
                        malwareResultHtml += `<strong>${question}: Incorrect!</strong> Correct Answer: ${malwareAnswers[question]}<br>`;
                    }
                } else {
                    malwareResultHtml += `<strong>${question}: Not answered!</strong><br>`;
                }
            }

            malwareResultHtml += `<h4>You scored ${score} out of ${totalQuestions}</h4>`;
            document.getElementById('malwareResult').innerHTML = malwareResultHtml;

            // Show the "Next" button after displaying the result
            document.getElementById('nextBtn').style.display = 'block';
        }

        function goToNextPage() {
            // Redirect to the next page (e.g., results.html or any page)
            window.location.href = 'studymaterials.php';
        }
    </script>

    <!-- Bootstrap 5 JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
</html>
